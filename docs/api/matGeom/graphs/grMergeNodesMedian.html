<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of grMergeNodesMedian</title>
  <meta name="keywords" content="grMergeNodesMedian">
  <meta name="description" content="GRMERGENODESMEDIAN Replace several nodes by their median coordinate.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003-2019 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">matGeom</a> &gt; <a href="index.html">graphs</a> &gt; grMergeNodesMedian.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for matGeom\graphs&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>grMergeNodesMedian
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>GRMERGENODESMEDIAN Replace several nodes by their median coordinate.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function [nodes2, edges2] = grMergeNodesMedian(nodes, edges, mnodes) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">GRMERGENODESMEDIAN Replace several nodes by their median coordinate.

   [NODES2, EDGES2] = grMergeNodesMedian(NODES, EDGES, NODES2MERGE)
   NODES ans EDGES are the graph structure, and NODES2MERGE is the list of
   indices of nodes to be merged.
   The median coordinate of merged nodes is computed, and all nodes are
   merged to this new node.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="grAdjacentNodes.html" class="code" title="function nodes2 = grAdjacentNodes(edges, node)">grAdjacentNodes</a>	GRADJACENTNODES Find list of nodes adjacent to a given node.</li><li><a href="grRemoveNode.html" class="code" title="function [nodes2, edges2] = grRemoveNode(nodes, edges, node)">grRemoveNode</a>	GRREMOVENODE Remove a node in a graph.</li><li><a href="../../matGeom/polygons2d/findPoint.html" class="code" title="function index = findPoint(coord, points, varargin)">findPoint</a>	FINDPOINT Find index of a point in an set from its coordinates.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [nodes2, edges2] = grMergeNodesMedian(nodes, edges, mnodes)</a>
0002 <span class="comment">%GRMERGENODESMEDIAN Replace several nodes by their median coordinate.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%   [NODES2, EDGES2] = grMergeNodesMedian(NODES, EDGES, NODES2MERGE)</span>
0005 <span class="comment">%   NODES ans EDGES are the graph structure, and NODES2MERGE is the list of</span>
0006 <span class="comment">%   indices of nodes to be merged.</span>
0007 <span class="comment">%   The median coordinate of merged nodes is computed, and all nodes are</span>
0008 <span class="comment">%   merged to this new node.</span>
0009 <span class="comment">%</span>
0010 <span class="comment">%</span>
0011 
0012 <span class="comment">% ------</span>
0013 <span class="comment">% Author: David Legland</span>
0014 <span class="comment">% E-mail: david.legland@inrae.fr</span>
0015 <span class="comment">% Created: 2003-08-13</span>
0016 <span class="comment">% Copyright 2003-2024 INRA - TPV URPOI - BIA IMASTE</span>
0017 
0018 <span class="comment">% coordinates of reference node</span>
0019 x = median(nodes(mnodes, 1));
0020 y = median(nodes(mnodes, 2));
0021 
0022 <span class="comment">% index of reference node</span>
0023 refNode = <a href="../../matGeom/polygons2d/findPoint.html" class="code" title="function index = findPoint(coord, points, varargin)">findPoint</a>([x y], nodes);
0024 mnodes = sort(mnodes(mnodes ~= refNode));
0025 
0026 <span class="keyword">for</span> n = 1:length(mnodes)
0027     node = mnodes(n);
0028     
0029     <span class="comment">% process each neighbor of the current node</span>
0030     neighbors = <a href="grAdjacentNodes.html" class="code" title="function nodes2 = grAdjacentNodes(edges, node)">grAdjacentNodes</a>(edges, node);
0031     <span class="keyword">for</span> e = 1:length(neighbors)
0032         edge = neighbors(e);
0033         
0034         <span class="keyword">if</span> edges(edge, 1) == refNode || edges(edge, 2) == refNode
0035             <span class="keyword">continue</span>;
0036         <span class="keyword">end</span>
0037 
0038         <span class="comment">% find if the node is referenced as 1 or 2 in the edge,</span>
0039         <span class="comment">% and replace it with the reference node.</span>
0040         <span class="keyword">if</span> edges(edge, 1) == node
0041             edges(edge, 1) = refNode;
0042         <span class="keyword">else</span>
0043             edges(edge, 2) = refNode;
0044         <span class="keyword">end</span>  
0045         
0046     <span class="keyword">end</span>
0047 <span class="keyword">end</span>   
0048 
0049 <span class="comment">% remove nodes from the list, except the reference node.</span>
0050 <span class="keyword">for</span> n = 1:length(mnodes)
0051     [nodes, edges] = <a href="grRemoveNode.html" class="code" title="function [nodes2, edges2] = grRemoveNode(nodes, edges, node)">grRemoveNode</a>(nodes, edges, mnodes(n)-n+1);
0052 <span class="keyword">end</span>
0053 
0054 nodes2 = nodes;
0055 edges2 = edges;
0056 
0057</pre></div>
<hr><address>Generated on Thu 21-Nov-2024 11:30:22 by <strong><a href="https://github.com/gllmflndn/m2html">m2html</a></strong> &copy; 2003-2022</address>
</body>
</html>