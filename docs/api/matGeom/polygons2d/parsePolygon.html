<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of parsePolygon</title>
  <meta name="keywords" content="parsePolygon">
  <meta name="description" content="PARSEPOLYGON Conversion between different polygon formats.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003-2019 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">matGeom</a> &gt; <a href="index.html">polygons2d</a> &gt; parsePolygon.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for matGeom\polygons2d&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>parsePolygon
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>PARSEPOLYGON Conversion between different polygon formats.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function [polyOut, inputFormat] = parsePolygon(poly, format, varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">PARSEPOLYGON Conversion between different polygon formats.

   POLYOUT = parsePolygon(POLY, FORMAT)
   Converts POLY to the specified format while FORMAT must be one of the
   following options: 'cell','nan','repetition','polyshape'. Mainly used
   in other polygon functions to bring the polygon into the required 
   format.

   Example
     r = [2.5, 2, 1];
     poly = flipud(circleToPolygon([0 0 r(1)], round(2*pi*r(1))));
     midCircle = circleToPolygon([0 0 r(2)], round(2*pi*r(2)));
     innerCircle = flipud(circleToPolygon([0 0 r(3)], round(2*pi*r(3))));
     poly = {poly, midCircle, innerCircle};
     polyOut = parsePolygon(poly, 'repetition');
     polyOut = parsePolygon(polyOut, 'nan');
     polyOut = parsePolygon(polyOut, 'polyshape');
     polyOut = parsePolygon(polyOut, 'cell');
     assert(isequal(poly, polyOut))

   See also
   <a href="polygonToPolyshape.html" class="code" title="function polyShape = polygonToPolyshape(poly, varargin)">polygonToPolyshape</a></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="parsePolygon.html" class="code" title="function [polyOut, inputFormat] = parsePolygon(poly, format, varargin)">parsePolygon</a>	PARSEPOLYGON Conversion between different polygon formats.</li><li><a href="splitPolygons.html" class="code" title="function polygons = splitPolygons(polygon)">splitPolygons</a>	SPLITPOLYGONS Convert a NaN separated polygon list to a cell array of polygons.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../matGeom/geom3d/clipPolygonByPlane3d.html" class="code" title="function poly2 = clipPolygonByPlane3d(poly, plane, varargin)">clipPolygonByPlane3d</a>	CLIPPOLYGONBYPLANE3D Clip a 3D polygon with a plane.</li><li><a href="../../matGeom/geom3d/isPolygon3d.html" class="code" title="function a = isPolygon3d(pol, varargin)">isPolygon3d</a>	ISPOLYGON3D Check if input is a 3d polygon.</li><li><a href="../../matGeom/geom3d/polygonCentroid3d.html" class="code" title="function [centroid, area] = polygonCentroid3d(varargin)">polygonCentroid3d</a>	POLYGONCENTROID3D Centroid (or center of mass) of a polygon.</li><li><a href="fillPolygon.html" class="code" title="function varargout = fillPolygon(varargin)">fillPolygon</a>	FILLPOLYGON Fill a polygon specified by a list of points.</li><li><a href="parsePolygon.html" class="code" title="function [polyOut, inputFormat] = parsePolygon(poly, format, varargin)">parsePolygon</a>	PARSEPOLYGON Conversion between different polygon formats.</li><li><a href="polygonCentroid.html" class="code" title="function [centroid, area, Sx, Sy] = polygonCentroid(varargin)">polygonCentroid</a>	POLYGONCENTROID Computes the centroid (center of mass) of a polygon.</li><li><a href="polygonSecondAreaMoments.html" class="code" title="function [Ixx, Iyy, Ixy] = polygonSecondAreaMoments(poly)">polygonSecondAreaMoments</a>	POLYGONSECONDAREAMOMENTS Compute second-order area moments of a polygon.</li><li><a href="polygonToPolyshape.html" class="code" title="function polyShape = polygonToPolyshape(poly, varargin)">polygonToPolyshape</a>	POLYGONTOPOLYSHAPE Convert a matGeom polygon to a MATLAB polyshape object.</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [polyOut, inputFormat] = parsePolygon(poly, format, varargin)</a>
0002 <span class="comment">%PARSEPOLYGON Conversion between different polygon formats.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%   POLYOUT = parsePolygon(POLY, FORMAT)</span>
0005 <span class="comment">%   Converts POLY to the specified format while FORMAT must be one of the</span>
0006 <span class="comment">%   following options: 'cell','nan','repetition','polyshape'. Mainly used</span>
0007 <span class="comment">%   in other polygon functions to bring the polygon into the required</span>
0008 <span class="comment">%   format.</span>
0009 <span class="comment">%</span>
0010 <span class="comment">%   Example</span>
0011 <span class="comment">%     r = [2.5, 2, 1];</span>
0012 <span class="comment">%     poly = flipud(circleToPolygon([0 0 r(1)], round(2*pi*r(1))));</span>
0013 <span class="comment">%     midCircle = circleToPolygon([0 0 r(2)], round(2*pi*r(2)));</span>
0014 <span class="comment">%     innerCircle = flipud(circleToPolygon([0 0 r(3)], round(2*pi*r(3))));</span>
0015 <span class="comment">%     poly = {poly, midCircle, innerCircle};</span>
0016 <span class="comment">%     polyOut = parsePolygon(poly, 'repetition');</span>
0017 <span class="comment">%     polyOut = parsePolygon(polyOut, 'nan');</span>
0018 <span class="comment">%     polyOut = parsePolygon(polyOut, 'polyshape');</span>
0019 <span class="comment">%     polyOut = parsePolygon(polyOut, 'cell');</span>
0020 <span class="comment">%     assert(isequal(poly, polyOut))</span>
0021 <span class="comment">%</span>
0022 <span class="comment">%   See also</span>
0023 <span class="comment">%   polygonToPolyshape</span>
0024 <span class="comment">%</span>
0025 
0026 <span class="comment">% ------</span>
0027 <span class="comment">% Author: oqilipo</span>
0028 <span class="comment">% E-mail: N/A</span>
0029 <span class="comment">% Created: 2023-01-01, using MATLAB 9.13.0.2080170 (R2022b) Update 1</span>
0030 <span class="comment">% Copyright 2023-2024</span>
0031 
0032 <span class="comment">% Parsing</span>
0033 p = inputParser;
0034 addRequired(p,<span class="string">'format'</span>,<span class="keyword">...</span>
0035     @(x) any(validatestring(x,{<span class="string">'cell'</span>,<span class="string">'nan'</span>,<span class="string">'repetition'</span>,<span class="string">'polyshape'</span>})));
0036 parse(p,format,varargin{:});
0037 
0038 format = p.Results.format;
0039 
0040 <span class="comment">% If polygon is a polyshape object</span>
0041 <span class="keyword">if</span> isa(poly,<span class="string">'polyshape'</span>)
0042     polyOut = <a href="parsePolygon.html" class="code" title="function [polyOut, inputFormat] = parsePolygon(poly, format, varargin)">parsePolygon</a>(poly.Vertices, format);
0043     inputFormat = <span class="string">'polyshape'</span>;
0044     <span class="keyword">return</span>
0045 <span class="keyword">end</span>
0046 
0047 <span class="comment">% If polygon is a cell</span>
0048 <span class="keyword">if</span> iscell(poly)
0049     [r, c] = size(poly);
0050     <span class="keyword">if</span> r &gt; 1 &amp;&amp; c &gt; 1
0051         error([<span class="string">'Non-supported polygon cell format with '</span> num2str(r) <span class="string">' rows and '</span> num2str(c) <span class="string">'columns!'</span>])
0052     <span class="keyword">elseif</span> r &gt; 1 &amp;&amp; c == 1
0053         polyCell = poly';
0054     <span class="keyword">elseif</span> r == 1 &amp;&amp; c &gt; 1
0055         polyCell = poly;
0056     <span class="keyword">elseif</span> r == 1 &amp;&amp; c == 1
0057         polyCell = poly;
0058     <span class="keyword">end</span>
0059     <span class="keyword">if</span> any(cellfun(@(x) any(isnan(x(:))), poly))
0060         error(<span class="string">'Non-supported polygon cell format. Polygons in cell format should not contain NaN values!'</span>)
0061     <span class="keyword">end</span>
0062     inputFormat = <span class="string">'cell'</span>;
0063 <span class="keyword">end</span>
0064 
0065 <span class="keyword">if</span> ~iscell(poly) &amp;&amp; any(isnan(poly(:)))
0066     <span class="comment">% If polygon contains nan</span>
0067     polyCell = <a href="splitPolygons.html" class="code" title="function polygons = splitPolygons(polygon)">splitPolygons</a>(poly)';
0068     inputFormat = <span class="string">'nan'</span>;
0069 <span class="keyword">elseif</span> ~iscell(poly)
0070     <span class="comment">% If polygon contains vertex repetitions</span>
0071     polyBackup = poly;
0072     polyCell = {};
0073     count = 0;
0074     <span class="keyword">while</span> ~isempty(poly)
0075         count = count+1;
0076         repLIdx = ismember(poly, poly(1,:), <span class="string">'rows'</span>);
0077         repIdx = find(repLIdx);
0078         <span class="keyword">if</span> sum(repLIdx) == 1
0079             polyCell = {poly};
0080             <span class="keyword">if</span> count == 1
0081                 <span class="keyword">break</span>
0082             <span class="keyword">else</span>
0083                 warning(<span class="string">'Contains vertex repetitions but the last vertex is not a repetiton!'</span>)
0084                 polyCell = {polyBackup};
0085             <span class="keyword">end</span>
0086         <span class="keyword">elseif</span> sum(repLIdx)&gt;1
0087             polyCell = [polyCell, {poly(1:repIdx(2)-1,:)}]; <span class="comment">%#ok&lt;AGROW&gt;</span>
0088             poly(1:repIdx(2),:) = [];
0089         <span class="keyword">end</span>
0090     <span class="keyword">end</span>
0091     inputFormat = <span class="string">'repetition'</span>;
0092 <span class="keyword">end</span>
0093 
0094 <span class="comment">% Convert to output format</span>
0095 <span class="keyword">switch</span> format
0096     <span class="keyword">case</span> <span class="string">'cell'</span>
0097         polyOut = polyCell;
0098     <span class="keyword">case</span> <span class="string">'nan'</span>
0099         polyOut = cell2mat((cellfun(@(x) [x; nan(1, size(x,2))], polyCell, <span class="string">'UniformOutput'</span>,false))');
0100         polyOut(<span class="keyword">end</span>,:) = [];
0101     <span class="keyword">case</span> <span class="string">'repetition'</span>
0102         polyOut = cell2mat((cellfun(@(x) [x; x(1,:)], polyCell, <span class="string">'UniformOutput'</span>,false))');
0103     <span class="keyword">case</span> <span class="string">'polyshape'</span>
0104         polyOut = polyshape(polyCell{1});
0105         NoP = length(polyCell);
0106         <span class="keyword">if</span> NoP &gt; 1
0107             <span class="keyword">for</span> p=2:NoP
0108                 polyOut = addboundary(polyOut, polyCell{p});
0109             <span class="keyword">end</span>
0110         <span class="keyword">end</span>
0111 <span class="keyword">end</span>
0112 
0113 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 21-Nov-2024 11:30:22 by <strong><a href="https://github.com/gllmflndn/m2html">m2html</a></strong> &copy; 2003-2022</address>
</body>
</html>