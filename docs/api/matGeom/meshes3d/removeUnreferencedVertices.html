<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of removeUnreferencedVertices</title>
  <meta name="keywords" content="removeUnreferencedVertices">
  <meta name="description" content="REMOVEUNREFERENCEDVERTICES Remove unreferenced vertices of a mesh.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003-2019 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">matGeom</a> &gt; <a href="index.html">meshes3d</a> &gt; removeUnreferencedVertices.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for matGeom\meshes3d&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>removeUnreferencedVertices
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>REMOVEUNREFERENCEDVERTICES Remove unreferenced vertices of a mesh.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function varargout = removeUnreferencedVertices(v, varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">REMOVEUNREFERENCEDVERTICES Remove unreferenced vertices of a mesh.

   [V2, F2] = removeUnreferencedVertices(V, F)
   Remove unreferenced/unindexed vertices of a mesh defined by the
   vertices V and faces F.

   [VIDX, FIDX] = removeUnreferencedVertices(V, F, 'indexOutput', true)
   Gives the indices instead of the final mesh. This means:
       V2 = V(VIDX,:)
       F2 = FIDX(F)

   Example:
     [v, f] = createCube;
     % Add unreferenced vertices
     for idx = [2, 5, 7]
         v = [v(1:idx,:); rand(1,3); v(idx+1:end,:)];
         f(find(f&gt;idx))=f(find(f&gt;idx))+1; %#ok&lt;FNDSB&gt; 
     end
     [v2, f2] = removeUnreferencedVertices(v, f);

   See also
     <a href="trimMesh.html" class="code" title="function varargout = trimMesh(varargin)">trimMesh</a>, <a href="removeDuplicateFaces.html" class="code" title="function faces2 = removeDuplicateFaces(faces, varargin)">removeDuplicateFaces</a>, <a href="removeDuplicateVertices.html" class="code" title="function varargout = removeDuplicateVertices(v,varargin)">removeDuplicateVertices</a>

   Source
     remove_unreferenced.m by Alec Jacobson:
       https://github.com/alecjacobson/gptoolbox</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="clipMeshByPlane.html" class="code" title="function [v2, f2, bE] = clipMeshByPlane(v, f, plane, varargin)">clipMeshByPlane</a>	CLIPMESHBYPLANE Clip a mesh by a plane.</li><li><a href="trimMesh.html" class="code" title="function varargout = trimMesh(varargin)">trimMesh</a>	TRIMMESH Reduce memory footprint of a polygonal mesh.</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = removeUnreferencedVertices(v, varargin)</a>
0002 <span class="comment">%REMOVEUNREFERENCEDVERTICES Remove unreferenced vertices of a mesh.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%   [V2, F2] = removeUnreferencedVertices(V, F)</span>
0005 <span class="comment">%   Remove unreferenced/unindexed vertices of a mesh defined by the</span>
0006 <span class="comment">%   vertices V and faces F.</span>
0007 <span class="comment">%</span>
0008 <span class="comment">%   [VIDX, FIDX] = removeUnreferencedVertices(V, F, 'indexOutput', true)</span>
0009 <span class="comment">%   Gives the indices instead of the final mesh. This means:</span>
0010 <span class="comment">%       V2 = V(VIDX,:)</span>
0011 <span class="comment">%       F2 = FIDX(F)</span>
0012 <span class="comment">%</span>
0013 <span class="comment">%   Example:</span>
0014 <span class="comment">%     [v, f] = createCube;</span>
0015 <span class="comment">%     % Add unreferenced vertices</span>
0016 <span class="comment">%     for idx = [2, 5, 7]</span>
0017 <span class="comment">%         v = [v(1:idx,:); rand(1,3); v(idx+1:end,:)];</span>
0018 <span class="comment">%         f(find(f&gt;idx))=f(find(f&gt;idx))+1; %#ok&lt;FNDSB&gt;</span>
0019 <span class="comment">%     end</span>
0020 <span class="comment">%     [v2, f2] = removeUnreferencedVertices(v, f);</span>
0021 <span class="comment">%</span>
0022 <span class="comment">%   See also</span>
0023 <span class="comment">%     trimMesh, removeDuplicateFaces, removeDuplicateVertices</span>
0024 <span class="comment">%</span>
0025 <span class="comment">%   Source</span>
0026 <span class="comment">%     remove_unreferenced.m by Alec Jacobson:</span>
0027 <span class="comment">%       https://github.com/alecjacobson/gptoolbox</span>
0028 
0029 <span class="comment">% ------</span>
0030 <span class="comment">% Author: oqilipo</span>
0031 <span class="comment">% E-mail: N/A</span>
0032 <span class="comment">% Created: 2023-07-14, using Matlab 9.13.0.2080170 (R2022b) Update 1</span>
0033 <span class="comment">% Copyright 2023-2024</span>
0034 
0035 <span class="comment">%% Parse input</span>
0036 <span class="keyword">if</span> isstruct(v)
0037     [v, f] = parseMeshData(v);
0038 <span class="keyword">else</span>
0039     f = varargin{1};
0040     varargin(1) = [];
0041 <span class="keyword">end</span>
0042 
0043 parser = inputParser;
0044 logParValidFunc = @(x) (islogical(x) || isequal(x,1) || isequal(x,0));
0045 addParameter(parser, <span class="string">'indexOutput'</span>, false, logParValidFunc);
0046 parse(parser, varargin{:});
0047 indexOutput = parser.Results.indexOutput;
0048 
0049 <span class="comment">%% Remove unreferenced/unindexed vertices</span>
0050 <span class="keyword">if</span> isempty(f)
0051     [vIdx, fIdx] = deal([]);
0052 <span class="keyword">else</span>
0053     <span class="comment">% Get list of unique vertex indices that occur in faces</span>
0054     sF = sort(f(:));
0055     I = [true;diff(sF)~=0];
0056     U = sF(I);
0057     <span class="comment">% Get list of vertices that do not occur in faces</span>
0058     n = size(v,1);
0059     NU = find(0==sparse(U,1,1,n,1));
0060     <span class="comment">% assert((size(U,1) + size(NU,1)) == n);</span>
0061     <span class="comment">% Allocate space for an indexmap</span>
0062     fIdx = zeros(n,1);
0063     <span class="comment">% Reindex vertices that occur in faces to be first</span>
0064     fIdx(U) = 1:size(U,1);
0065     <span class="comment">% Reindex vertices that do not occur in faces to come after those that do</span>
0066     fIdx(NU) = size(U,1) + (1:size(NU,1));
0067     <span class="comment">% New vertices</span>
0068     vIdx = ismember(1:length(v),U);
0069     <span class="comment">% v2(fIdx,:) = v;</span>
0070     <span class="comment">% v2 = v2(1:max(fIdx(f(:))),:);</span>
0071 <span class="keyword">end</span>
0072 
0073 <span class="comment">%% Parse output</span>
0074 <span class="keyword">if</span> indexOutput
0075     <span class="comment">% If indices are requested</span>
0076     varargout = {vIdx, fIdx};
0077 <span class="keyword">else</span>
0078     v2 = v(vIdx,:);
0079     f2 = fIdx(f);
0080     varargout = formatMeshOutput(nargout, v2, f2);
0081 <span class="keyword">end</span>
0082 
0083 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 21-Nov-2024 11:30:22 by <strong><a href="https://github.com/gllmflndn/m2html">m2html</a></strong> &copy; 2003-2022</address>
</body>
</html>