<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of drawMesh</title>
  <meta name="keywords" content="drawMesh">
  <meta name="description" content="DRAWMESH Draw a 3D mesh defined by vertex and face arrays.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003-2019 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">matGeom</a> &gt; <a href="index.html">meshes3d</a> &gt; drawMesh.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for matGeom\meshes3d&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>drawMesh
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>DRAWMESH Draw a 3D mesh defined by vertex and face arrays.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function varargout = drawMesh(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">DRAWMESH Draw a 3D mesh defined by vertex and face arrays.

   drawMesh(VERTICES, FACES)
   Draws the 3D mesh defined by vertices VERTICES and the faces FACES. 
   vertices is a NV-by-3 array containing coordinates of vertices, and
   FACES is either a NF-by-3 or NF-by-4 array containing face vertex
   indices of the triangular or rectangular faces.
   FACES can also be a cell array, each cell containing an array of vertex
   indices for the corresponding face. In this case the faces may have
   variable number of vertices. 
   
   drawMesh(MESH)
   Specifies the mesh as a structure containing at least the fields
   'vertices' and 'faces', using the same conventions as above.

   drawMesh(..., COLOR)
   Use the specified color to render the mesh faces.

   drawMesh(..., NAME, VALUE)
   Use one or several pairs of parameter name/value to specify drawing
   options. Options are the same as the 'patch' function.

   drawMesh(AX,...) 
   Draw into the axis specified by AX instead of the current axis.


   H = drawMesh(...);
   Also returns a handle to the created patch.

   Example:
     % display a polyhedra with polygonal faces
     [v, f] = createSoccerBall;
     drawMesh(v, f);

     % Display a mesh representing a  torus, using uniform face color
     [v, f] = torusMesh;
     figure; hold on; axis equal; view(3);
     drawMesh(v, f, 'FaceColor', 'g')
     % paint the mesh according to vertex x-coordinate
     figure; hold on; axis equal; view(3);
     drawMesh(v, f, 'VertexColor', v(:,1), 'LineStyle', 'none');

   See also
     meshes3d, <a href="polyhedra.html" class="code" title="function polyhedra(varargin)">polyhedra</a>, patch</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../matGeom/geom3d/drawCube.html" class="code" title="function varargout = drawCube(varargin)">drawCube</a>	DRAWCUBE Draw a 3D centered cube, eventually rotated.</li><li><a href="../../matGeom/geom3d/drawCuboid.html" class="code" title="function varargout = drawCuboid(varargin)">drawCuboid</a>	DRAWCUBOID Draw a 3D cuboid, eventually rotated.</li><li><a href="meshSilhouette.html" class="code" title="function silhouette = meshSilhouette(v, f, varargin)">meshSilhouette</a>	MESHSILHOUETTE Compute the 2D outline of a 3D mesh on an arbitrary plane.</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = drawMesh(varargin)</a>
0002 <span class="comment">%DRAWMESH Draw a 3D mesh defined by vertex and face arrays.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%   drawMesh(VERTICES, FACES)</span>
0005 <span class="comment">%   Draws the 3D mesh defined by vertices VERTICES and the faces FACES.</span>
0006 <span class="comment">%   vertices is a NV-by-3 array containing coordinates of vertices, and</span>
0007 <span class="comment">%   FACES is either a NF-by-3 or NF-by-4 array containing face vertex</span>
0008 <span class="comment">%   indices of the triangular or rectangular faces.</span>
0009 <span class="comment">%   FACES can also be a cell array, each cell containing an array of vertex</span>
0010 <span class="comment">%   indices for the corresponding face. In this case the faces may have</span>
0011 <span class="comment">%   variable number of vertices.</span>
0012 <span class="comment">%</span>
0013 <span class="comment">%   drawMesh(MESH)</span>
0014 <span class="comment">%   Specifies the mesh as a structure containing at least the fields</span>
0015 <span class="comment">%   'vertices' and 'faces', using the same conventions as above.</span>
0016 <span class="comment">%</span>
0017 <span class="comment">%   drawMesh(..., COLOR)</span>
0018 <span class="comment">%   Use the specified color to render the mesh faces.</span>
0019 <span class="comment">%</span>
0020 <span class="comment">%   drawMesh(..., NAME, VALUE)</span>
0021 <span class="comment">%   Use one or several pairs of parameter name/value to specify drawing</span>
0022 <span class="comment">%   options. Options are the same as the 'patch' function.</span>
0023 <span class="comment">%</span>
0024 <span class="comment">%   drawMesh(AX,...)</span>
0025 <span class="comment">%   Draw into the axis specified by AX instead of the current axis.</span>
0026 <span class="comment">%</span>
0027 <span class="comment">%</span>
0028 <span class="comment">%   H = drawMesh(...);</span>
0029 <span class="comment">%   Also returns a handle to the created patch.</span>
0030 <span class="comment">%</span>
0031 <span class="comment">%   Example:</span>
0032 <span class="comment">%     % display a polyhedra with polygonal faces</span>
0033 <span class="comment">%     [v, f] = createSoccerBall;</span>
0034 <span class="comment">%     drawMesh(v, f);</span>
0035 <span class="comment">%</span>
0036 <span class="comment">%     % Display a mesh representing a  torus, using uniform face color</span>
0037 <span class="comment">%     [v, f] = torusMesh;</span>
0038 <span class="comment">%     figure; hold on; axis equal; view(3);</span>
0039 <span class="comment">%     drawMesh(v, f, 'FaceColor', 'g')</span>
0040 <span class="comment">%     % paint the mesh according to vertex x-coordinate</span>
0041 <span class="comment">%     figure; hold on; axis equal; view(3);</span>
0042 <span class="comment">%     drawMesh(v, f, 'VertexColor', v(:,1), 'LineStyle', 'none');</span>
0043 <span class="comment">%</span>
0044 <span class="comment">%   See also</span>
0045 <span class="comment">%     meshes3d, polyhedra, patch</span>
0046 <span class="comment">%</span>
0047 
0048 <span class="comment">% ------</span>
0049 <span class="comment">% Author: David Legland</span>
0050 <span class="comment">% E-mail: david.legland@inrae.fr</span>
0051 <span class="comment">% Created: 2005-02-10</span>
0052 <span class="comment">% Copyright 2005-2024 INRA - TPV URPOI - BIA IMASTE</span>
0053 
0054 <span class="comment">%% Parse input arguments</span>
0055 
0056 <span class="comment">% extract first argument</span>
0057 var1 = varargin{1};
0058 varargin(1) = [];
0059 
0060 <span class="comment">% Check if first input argument is an axes handle</span>
0061 <span class="keyword">if</span> isAxisHandle(var1)
0062     ax = var1;
0063     var1 = varargin{1};
0064     varargin(1) = [];
0065 <span class="keyword">else</span>
0066     ax = gca;
0067 <span class="keyword">end</span>
0068 
0069 <span class="comment">% Check if the input is a mesh structure</span>
0070 <span class="keyword">if</span> isstruct(var1)
0071     <span class="comment">% extract data to display</span>
0072     vertices = var1.vertices;
0073     faces = var1.faces;
0074 <span class="keyword">else</span>
0075     <span class="comment">% assumes input is given with vertices+faces arrays</span>
0076     vertices = var1;
0077     faces = varargin{1};
0078     varargin(1) = [];
0079 <span class="keyword">end</span>
0080 
0081 <span class="comment">% if vertices are 2D points, add a z=0 coordinate</span>
0082 <span class="keyword">if</span> size(vertices, 2) == 2
0083     vertices(1, 3) = 0;
0084 <span class="keyword">end</span>
0085 
0086 
0087 <span class="comment">%% Pre-processing for formatting display options</span>
0088 
0089 <span class="comment">% default color for drawing mesh</span>
0090 faceColor = [1 0 0];
0091 
0092 <span class="comment">% combine default face color with varargin</span>
0093 <span class="keyword">if</span> isempty(varargin)
0094     varargin = [{<span class="string">'FaceColor'</span>}, faceColor];
0095 <span class="keyword">elseif</span> isscalar(varargin)
0096     <span class="comment">% if only one optional argument is provided, it is assumed to be color</span>
0097     faceColor = varargin{1};
0098     varargin = [{<span class="string">'FaceColor'</span>}, varargin];
0099 <span class="keyword">elseif</span> length(varargin) &gt; 1
0100     <span class="comment">% check if FaceColor option is specified,</span>
0101     <span class="comment">% and if not use default face color</span>
0102     indFC = strcmpi(varargin(1:2:end), <span class="string">'FaceColor'</span>);
0103     <span class="keyword">if</span> ~any(indFC)
0104         varargin = [{<span class="string">'FaceColor'</span>}, {faceColor}, varargin];
0105     <span class="keyword">end</span>
0106 <span class="keyword">end</span>
0107 
0108 <span class="comment">% check if simplified options are present</span>
0109 indVC = find(strcmpi(varargin(1:2:end), <span class="string">'VertexColor'</span>));
0110 <span class="keyword">if</span> ~isempty(indVC)
0111     vertexColor = varargin{indVC * 2};
0112     varargin([indVC*2-1 indVC*2]) = [];
0113     indFC = find(strcmpi(varargin(1:2:end), <span class="string">'FaceColor'</span>));
0114     <span class="keyword">if</span> ~isempty(indFC)
0115         varargin([indFC*2-1 indFC*2]) = [];
0116     <span class="keyword">end</span>
0117     varargin = [{<span class="string">'FaceVertexCData'</span>}, {vertexColor}, {<span class="string">'FaceColor'</span>}, {<span class="string">'interp'</span>}, varargin];
0118 <span class="keyword">end</span>
0119 
0120 
0121 <span class="comment">%% Draw the mesh</span>
0122 
0123 <span class="comment">% overwrite on current figure</span>
0124 hold(ax, <span class="string">'on'</span>);
0125 
0126 <span class="comment">% Use different processing depending on the type of faces</span>
0127 <span class="keyword">if</span> isnumeric(faces)
0128     <span class="comment">% array FACES is a NF-by-NV indices array, with NF: number of faces,</span>
0129     <span class="comment">% and NV: number of vertices per face</span>
0130     h = patch(<span class="string">'Parent'</span>, ax, <span class="keyword">...</span>
0131         <span class="string">'vertices'</span>, vertices, <span class="string">'faces'</span>, faces, <span class="keyword">...</span>
0132         varargin{:});
0133 
0134 <span class="keyword">elseif</span> iscell(faces)
0135     <span class="comment">% array FACES is a cell array. Need to draw each face as a single</span>
0136     <span class="comment">% patch.</span>
0137     h = zeros(length(faces(:)), 1);
0138 
0139     <span class="keyword">for</span> iFace = 1:length(faces(:))
0140         <span class="comment">% get vertices of the cell</span>
0141         face = faces{iFace};
0142 
0143         <span class="comment">% Special processing in case of multiple polygonal face:</span>
0144         <span class="comment">% each polygonal loop is separated by a NaN.</span>
0145         <span class="keyword">if</span> sum(isnan(face)) ~= 0
0146             
0147             <span class="comment">% find indices of loops breaks</span>
0148             inds = find(isnan(face));
0149             
0150             <span class="comment">% replace NaNs by index of first vertex of each polygon</span>
0151             face(inds(2:end))   = face(inds(1:end-1)+1);
0152             face(inds(1))       = face(1);
0153             face(length(face)+1)= face(inds(end)+1);            
0154         <span class="keyword">end</span>
0155         
0156         <span class="comment">% draw current face</span>
0157         cnodes = vertices(face, :);
0158         h(iFace) = patch(ax, cnodes(:, 1), cnodes(:, 2), cnodes(:, 3), faceColor);
0159     <span class="keyword">end</span>
0160     
0161     <span class="comment">% set up drawing options</span>
0162     set(h, varargin{:});
0163 <span class="keyword">else</span>
0164     error(<span class="string">'MatGeom:drawMesh'</span>, <span class="string">'Second argument must be a face array'</span>);
0165 <span class="keyword">end</span>
0166 
0167 
0168 <span class="comment">%% Process output arguments</span>
0169 
0170 <span class="comment">% format output parameters</span>
0171 <span class="keyword">if</span> nargout &gt; 0
0172     varargout = {h};
0173 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 21-Nov-2024 11:30:22 by <strong><a href="https://github.com/gllmflndn/m2html">m2html</a></strong> &copy; 2003-2022</address>
</body>
</html>